#!/bin/bash

#  _  __                    _      _             _     _ _            _                  
# | |/ /___ _ __ _ __   ___| |    / \   _ __ ___| |__ (_) |_ ___  ___| |_ _   _ _ __ ___ 
# | ' // _ \ '__| '_ \ / _ \ |   / _ \ | '__/ __| '_ \| | __/ _ \/ __| __| | | | '__/ _ \
# | . \  __/ |  | | | |  __/ |  / ___ \| | | (__| | | | | ||  __/ (__| |_| |_| | | |  __/
# |_|\_\___|_|  |_| |_|\___|_| /_/   \_\_|  \___|_| |_|_|\__\___|\___|\__|\__,_|_|  \___|
SYS_INFO=`uname -a`
echo "#Architecture: $SYS_INFO"



#  ____                                             
# |  _ \ _ __ ___   ___ ___  ___ ___  ___  _ __ ___ 
# | |_) | '__/ _ \ / __/ _ \/ __/ __|/ _ \| '__/ __|
# |  __/| | | (_) | (_|  __/\__ \__ \ (_) | |  \__ \
# |_|   |_|  \___/ \___\___||___/___/\___/|_|  |___/
CPU=`lscpu | grep "^CPU(s)" | sed 's/ //g' | awk -F: '{print $2}'`
vCPU=`lscpu | grep "core" | sed 's/ //g' | awk -F: '{print $2}'`
echo "#CPU: $CPU"
echo "#vCPU: $vCPU"




#  __  __                                 
# |  \/  | ___ _ __ ___   ___  _ __ _   _ 
# | |\/| |/ _ \ '_ ` _ \ / _ \| '__| | | |
# | |  | |  __/ | | | | | (_) | |  | |_| |
# |_|  |_|\___|_| |_| |_|\___/|_|   \__, |
#                                   |___/ 
USED_RAM=`free --mega | awk 'NR==2{print $3}'`
TOTALE_RAM=`free --mega | awk 'NR==2{print $2}'`
PERCENTAGE_RAM=`echo "scale=2; ($USED_RAM/$TOTALE_RAM)*100" | bc`
echo "#Memory Usage: `free --mega | awk 'NR==2{print $3}'`/`free -h | awk 'NR==2{print $2}'`($PERCENTAGE_RAM%)"




#  ____  _     _      _   _                      
# |  _ \(_)___| | __ | | | |___  __ _  __ _  ___ 
# | | | | / __| |/ / | | | / __|/ _` |/ _` |/ _ \
# | |_| | \__ \   <  | |_| \__ \ (_| | (_| |  __/
# |____/|_|___/_|\_\  \___/|___/\__,_|\__, |\___|
#                                     |___/      
SIZE_DISK=`df -h / | awk 'NR==2{print $2}'`
USED_DISK=`df -h / | awk 'NR==2{print $3}'`
PERCENTAGE_DISK=`df -h / | awk 'NR==2{print $5}'`
echo "#Disk Usage: $USED_DISK/$SIZE_DISK ($PERCENTAGE_DISK)"




#   ____ ____  _   _   _                    _ 
#  / ___|  _ \| | | | | |    ___   __ _  __| |
# | |   | |_) | | | | | |   / _ \ / _` |/ _` |
# | |___|  __/| |_| | | |__| (_) | (_| | (_| |
#  \____|_|    \___/  |_____\___/ \__,_|\__,_|
PERCENTAGE_CPU=`top -b -n 1 | awk 'NR==3' | cut -d ',' -f 1 | cut -c 9-13 | sed 's/ //g' `
echo "#CPU Load: $PERCENTAGE_CPU%"




#  ____              _     _____ _                
# | __ )  ___   ___ | |_  |_   _(_)_ __ ___   ___ 
# |  _ \ / _ \ / _ \| __|   | | | | '_ ` _ \ / _ \
# | |_) | (_) | (_) | |_    | | | | | | | | |  __/
# |____/ \___/ \___/ \__|   |_| |_|_| |_| |_|\___|
DATE=`who -b | cut -c 23-`
echo "#Last Boot: `date -d "$DATE" '+%Y-%m+%d %H:%M'`"                     



#  _ __     ____  __                  
# | |\ \   / /  \/  |  _   _ ___  ___ 
# | | \ \ / /| |\/| | | | | / __|/ _ \
# | |__\ V / | |  | | | |_| \__ \  __/
# |_____\_/  |_|  |_|  \__,_|___/\___|
lsblk | grep lvm > /dev/null
echo -n "#LVM use: "; [ $? -eq 0 ] && echo "yes" || echo "no"  



#  _____ ____ ____     ____                            _   _             
# |_   _/ ___|  _ \   / ___|___  _ __  _ __   ___  ___| |_(_) ___  _ __  
#   | || |   | |_) | | |   / _ \| '_ \| '_ \ / _ \/ __| __| |/ _ \| '_ \ 
#   | || |___|  __/  | |__| (_) | | | | | | |  __/ (__| |_| | (_) | | | |
#   |_| \____|_|      \____\___/|_| |_|_| |_|\___|\___|\__|_|\___/|_| |_|
TCP_CONX=`netstat | grep -E "(^tcp)*(ESTABLISHED$)" | wc -l`
echo "#Connection TCP: "$TCP_CONX" ESTABLISHED"

                                                                       

#  _   _                 _                
# | | | |___  ___ _ __  | |    ___   __ _ 
# | | | / __|/ _ \ '__| | |   / _ \ / _` |
# | |_| \__ \  __/ |    | |__| (_) | (_| |
#  \___/|___/\___|_|    |_____\___/ \__, |
#                                   |___/ 
USERS=`who | cut -d ' ' -f 1 | sort -u | wc -l`
echo "#User Log: "$USERS



#  _   _      _                      _      ___ ____  
# | \ | | ___| |___      _____  _ __| | __ |_ _|  _ \ 
# |  \| |/ _ \ __\ \ /\ / / _ \| '__| |/ /  | || |_) |
# | |\  |  __/ |_ \ V  V / (_) | |  |   <   | ||  __/ 
# |_| \_|\___|\__| \_/\_/ \___/|_|  |_|\_\ |___|_|    
MAC_ADD=`ip a | grep ether | awk -F' ' '{print $2}'`
IP_ADD=`ip a | grep inet | awk 'NR==3{print $2}' | awk -F/ '{print $1}'` 
echo "#Network: IP $IP_ADD ($MAC_ADD)" 



#  ____            _       
# / ___| _   _  __| | ___  
# \___ \| | | |/ _` |/ _ \ 
#  ___) | |_| | (_| | (_) |
# |____/ \__,_|\__,_|\___/ 
SUDO_CMD=`grep COMMAND /var/log/sudo/sudo | wc -l`
echo "#Sudo: $SUDO_CMD cmd"
